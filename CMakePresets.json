{
  "version": 6,

  "configurePresets": [
    {
      "name": "dev-ninja",
      "displayName": "Dev (Ninja, Debug)",
      "generator": "Ninja",
      "binaryDir": "build-ninja",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "Debug",
        "CMAKE_EXPORT_COMPILE_COMMANDS": "ON"
      }
    },
    {
      "name": "dev-ninja-san",
      "displayName": "Dev (Ninja, ASan+UBSan, Debug)",
      "generator": "Ninja",
      "binaryDir": "build-ninja-san",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "Debug",
        "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
        "VIX_ENABLE_SANITIZERS": "ON",
        "VIX_SANITIZER_MODE": "asan_ubsan"
      }
    },
    {
      "name": "dev-ninja-ubsan",
      "displayName": "Dev (Ninja, UBSan, Debug)",
      "generator": "Ninja",
      "binaryDir": "build-ninja-ubsan",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "Debug",
        "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
        "VIX_ENABLE_SANITIZERS": "ON",
        "VIX_SANITIZER_MODE": "ubsan"
      }
    },

    {
      "name": "release",
      "displayName": "Release (Ninja, Release)",
      "generator": "Ninja",
      "binaryDir": "build-release",
      "cacheVariables": {
        "CMAKE_BUILD_TYPE": "Release",
        "CMAKE_EXPORT_COMPILE_COMMANDS": "ON"
      }
    },

    {
      "name": "dev-msvc",
      "displayName": "Dev (MSVC, Release)",
      "generator": "Visual Studio 17 2022",
      "architecture": { "value": "x64" },
      "binaryDir": "build-msvc",
      "cacheVariables": {
        "CMAKE_CONFIGURATION_TYPES": "Release"
      }
    }
  ],

  "buildPresets": [
    {
      "name": "build-ninja",
      "displayName": "Build (ALL, Ninja Debug)",
      "configurePreset": "dev-ninja"
    },
    {
      "name": "build-ninja-san",
      "displayName": "Build (ALL, Ninja Debug, ASan+UBSan)",
      "configurePreset": "dev-ninja-san"
    },
    {
      "name": "build-ninja-ubsan",
      "displayName": "Build (ALL, Ninja Debug, UBSan)",
      "configurePreset": "dev-ninja-ubsan"
    },

    {
      "name": "build-release",
      "displayName": "Build (ALL, Ninja Release)",
      "configurePreset": "release"
    },

    {
      "name": "run-dev-ninja",
      "displayName": "Run (target=run, Ninja Debug)",
      "configurePreset": "dev-ninja",
      "targets": ["run"]
    },
    {
      "name": "run-release",
      "displayName": "Run (target=run, Ninja Release)",
      "configurePreset": "release",
      "targets": ["run"]
    },

    {
      "name": "build-msvc",
      "displayName": "Build (ALL, MSVC)",
      "configurePreset": "dev-msvc",
      "configuration": "Release"
    },
    {
      "name": "run-msvc",
      "displayName": "Run (target=run, MSVC)",
      "configurePreset": "dev-msvc",
      "configuration": "Release",
      "targets": ["run"]
    },

    {
      "name": "dev-ninja",
      "displayName": "Alias: dev-ninja → build-ninja",
      "configurePreset": "dev-ninja"
    },
    {
      "name": "dev-ninja-san",
      "displayName": "Alias: dev-ninja-san → build-ninja-san",
      "configurePreset": "dev-ninja-san"
    },
    {
      "name": "dev-ninja-ubsan",
      "displayName": "Alias: dev-ninja-ubsan → build-ninja-ubsan",
      "configurePreset": "dev-ninja-ubsan"
    },

    {
      "name": "release",
      "displayName": "Alias: release → build-release",
      "configurePreset": "release"
    },

    {
      "name": "dev-msvc",
      "displayName": "Alias: dev-msvc → build (MSVC)",
      "configurePreset": "dev-msvc",
      "configuration": "Release"
    }
  ]
}
